{% extends "layout.html" %}
{% block title %}
    Cards
{% endblock %}
{% block bodytitle %}
    CardStack
{% endblock %}
{% block main %}
    <div class="container-fluid">
        <br>
        {% if cards %}
            {% if cards.get("count") > 0 %}
                <div class="card-columns">
                    {% for card in cards.get("events")|reverse %}
                        <div class="card">
                            <div class="card-body">
                                <center><h3 class="card-title">{{ card.get("name") }}</h3></center>
                                <hr>
                                <p class="card-text"><span class="fa fa-clock-o"></span>&nbsp{{ card.get("created") }}</p>
                                <p class="card-text">Card ID: {{ card.get("event_id") }}</p>
                                <br>
                                <div class="form-group">
                                    <a href="/card/{{ card.get('event_id') }}" class="btn btn-primary">Open Card</a>
                                    <a href="/card/{{ card.get('event_id') }}/delete" class="btn btn-primary">Delete Card</a>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    <div class="card">
                        <div class="card-body">
                            <form action="/card/new" method="post">
                                <center>
                                    <div class="input-group" style="width:75%">
                                        <input type="text" class="form-control" placeholder="New Card.." name="card_name">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="submit" name="new_card_submit"><span class="fa fa-plus"></span></button>  
                                        </div>
                                    </div>
                                </center>
                            </form>
                            <hr>
                            <p class="card-text">Create a new card</p>
                        </div>
                    </div>
                </div>
            {% else %}
                <div class="card-columns">
                    <div class="card">
                        <div class="card-body">
                            <form action="/card/new" method="post">
                                <center>
                                    <div class="input-group" style="width:75%">
                                        <input type="text" class="form-control" placeholder="New Card.." name="card_name">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="submit" name="new_card_submit"><span class="fa fa-plus"></span></button>  
                                        </div>
                                    </div>
                                </center>
                            </form>
                            <hr>
                            <p class="card-text">Create a new card</p>
                        </div>
                    </div>
                </div> 
            {% endif %}
        {% else %}
            <h2>Error. Failed to connect to evendex API</h2>
        {% endif %}
    </div>
{% endblock %}